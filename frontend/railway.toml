[build]
builder = "nixpacks"
buildCommand = "npm install && npm run build"

[deploy]
# Serve the built static files directly
startCommand = "npx serve dist -l 5000 --single"
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 10

# Environment variables for production
[deploy.environment]
VITE_API_BASE_URL = "https://wip-bitcoin-analytics-production.up.railway.app/api"
VITE_ENV = "production"
